---
import { getCollection } from 'astro:content';
import { Image } from 'astro:assets';
import BaseLayout from '../layouts/BaseLayout.astro';
import BlogPost from '../components/BlogPost.astro';
const allBlogPosts = await getCollection("blog");
const pageTitle = "Blog Page";
---

<BaseLayout pageTitle={pageTitle}>
	<div class="btn text-btn">Blog Page</div>
  <p class="text-left ml-8">This is the blog page of the site.</p>
  <p class="text-left ml-8">It will be updated throughout the tutorial.</p>
  <ul class="m-8 grid grid-cols-1 sm:grid-cols-3 gap-8">
    {allBlogPosts.map((post: any) =>
      <div class="flex flex-col h-full">
        <div class="min-h-12 sm:min-h-20">
          <BlogPost 
            url={`/posts/${post.id}`} 
            title={post.data.title} 
          />
        </div>
        <div class="mt-auto">
          <Image 
            class="w-full object-cover" 
            src={post.data.cover} 
            alt={post.data.coverAlt} 
            layout='constrained' 
            loading="eager" 
            inferSize 
          />
        </div>
        
      </div>
    )}
  </ul>
</BaseLayout>